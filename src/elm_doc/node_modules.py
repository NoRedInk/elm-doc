'''
Run npm commands. Uses yarn if present.
'''
import shutil
import subprocess


def has_yarn():
    return shutil.which('yarn') is not None


def install(*extra_args, **popen_kwargs):
    if has_yarn():
        subprocess.check_call(('yarn', 'install') + extra_args, **popen_kwargs)
    else:
        subprocess.check_call(('npm', 'install') + extra_args, **popen_kwargs)


def add(*extra_args, **popen_kwargs):
    if has_yarn():
        subprocess.check_call(('yarn', 'add') + extra_args, **popen_kwargs)
    else:
        subprocess.check_call(('npm', 'install') + extra_args, **popen_kwargs)
